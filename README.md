# SimpleCI

一个简单可用的持续集成平台


## 1. 项目背景

随着互联网技术和云计算平台的迅速发展，当前软件开发的复杂度不断降低，软件开发**编码阶段**所占时间相比与过去大幅度减少。但编码完成仅仅是完成了软件项目的第一步。只有完成了后续的**版本管理、配置管理、文档管理、服务器配置、数据库配置**等一系列复杂而繁琐的操作，软件项目才能够正式使用。上述过程，在现代软件开发管理中，被称为**持续集成（Continuous Integration）**。

现代的软件项目，往往伴随着更加复杂的需求变更，复杂的需求变更则意味着频繁的上线和下线。在这个过程中，如果持续集成流程不规范，往往会造成大量的**时间浪费**，有时上线一个功能就需要一天时间，而开发该功能可能只需要几分钟，这极大地制约着团队的生产力。更为严重的是，如果持续集成流程不规范，会造成**线上代码版本混乱**，这对于后续新功能的开发更是灾难性的。

为了应对上述频繁的上下线需求，更好地管理软件版本、配置、文档、服务器资源、数据库资源等，产生了大量的持续集成平台，目前互联网中最为主流的CI平台非Jenkins莫属。但Jenkins的操作和配置都比较复杂，适合更加专业和大型的运维开发团队。

- [Jenkins](https://jenkins.io/zh/)

许多小型团队运维能力比较欠缺，难以驾驭上述专业开源工具，且许多开源运维平台定制功能比较困难。因此，自研一个简单可用的持续集成平台仍然十分有必要，许多公司都在开源软件的基础上自研了面向本公司的自动化运维平台。

## 2. 需求描述

### 2.1 系统名称

**SimpleCI**：一个简单可用的持续集成平台

### 2.2 系统核心功能需求

1. **用户管理**：支持用户的自注册，为不同的用户分配不同的权限。
2. **主机管理**：允许注册用户添加自己的主机（提供主机IP地址、ROOT用户名和密码），系统会根据用户找到用户添加的主机。允许用户对主机定义业务别名，方便用户通过业务名查询主机IP.
3. **环境配置管理**：系统根据用户提供的主机信息进入对应的主机，检测是否具有特定的环境，并提供快速安装。（初步支持Java、PHP、前端）

    - 基础工具的检测和安装
    - Java环境的检测和安装
    - PHP环境的检测和安装
    - Maven的检测和安装
    - Composer的检测和安装
    - Tomcat的检测和安装
    - Nginx的检测和安装
    - PHP C语言原生扩展的检测和安装
    - Node.js的检测和安装
    - 端口占用检测
    - 服务状态检测

4. **代码上线管理和版本管理**：支持从代码托管平台(git）拉取代码并打包部署上线。用户选择主机、软件平台、代码仓库路径，代码tag版本后，完成项目自动上线和下线。

    - 代码一键上线
    - 代码一键下线
    - 显示代码版本
    - 代码自动打包
    - 代码上线日志
    - 代码版本发布说明

### 2.3 系统非功能需求

1. **通用**：该项目要与用户实际业务解耦合，与用户代码的实际业务场景无关。
2. **开源**：该项目采用开源方式开发，回馈开源社区。
3. **简单**：该项目不要求用户掌握Linux运维知识，不要求用户掌握git知识，不需要用户了解Java、PHP项目打包上线流程。
4. **易用**：该项目提供较好的前端体验。

## 3. 技术需求

### 3.1 技术栈

1. **开发语言**：Python
2. **Web框架**：待定

### 3.2 技能要求

**必备条件**

---

1. 对Linux运维感兴趣，热爱开源社区
2. 愿意从事运维开发工作
3. 熟悉Linux命令，对Linux环境配置、软件安装、端口检测、initd、systemd等知识有一定了解。
4. 熟悉Python编程，了解Python Web框架的至少一种。

**可选条件**

---

1. 愿意熟悉Git，愿意熟悉软件版本发布流程。
2. 熟悉代码打包上线流程，参与过Java、PHP、前端项目上线。
3. 使用过Jenkins、禅道等运维平台。

### 3.3 职位诱惑

1. 人们常说软件开发是吃年轻饭的，或者经常抱怨开发业务代码学不到东西。与业务开发相反，系统运维人员则是越老越值钱的职业。许多互联网公司目前都成立了专门的**运维开发**团队，推动着传统运维向运维开发的转变。在各大招聘软件中可以看到，许多大型互联网公司都在高薪招聘运维开发人员。
2. **DevOps**（开发自运维）是当前IT行业的发展趋势。其先进性不言而喻，这套持续集成系统未来会支持Docker、k8s、容器化等先进软件架构工具。参与该系统的开发会帮助你成长为更有竞争力的工程师。
3. 了解软件开发中至关重要的概念。持续集成平台是属于软件基础架构平台，在国外一般分属于**infra团队**（基础设施团队）负责，开发业务无关的代码非常有利于你的成长。
4. 开发属于自己的开源项目，真正的参与开源，为世界软件行业做贡献。
5. 与开源作者**Li Yi**(@kirineko)一起开发开源项目，体验团队开发的魅力。